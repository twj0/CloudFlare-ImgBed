"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[57],{1241:function(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a}},4896:function(e,t,a){a(5331)},5331:function(){},9057:function(e,t,a){a.d(t,{A:function(){return ma}});a(8111),a(2489),a(1701),a(8237);var l=a(6768),s=a(144),i=a(782),n=a(1219),o=a(7477),r=a(4232);const c={key:0,class:"traffic-lights"},u={key:0,width:"6",height:"6",viewBox:"0 0 6 6"},d={key:0,width:"8",height:"1",viewBox:"0 0 8 1"},m={key:0,width:"6",height:"6",viewBox:"0 0 6 6"},v={class:"title"},p={class:"controls"};var k={__name:"MacTitleBar",props:{title:{type:String,default:"Untitled"},showTrafficLights:{type:Boolean,default:!0},isFocused:{type:Boolean,default:!0}},emits:["close","minimize","maximize","double-click"],setup(e,{emit:t}){const a=(0,s.KR)(!1),i=(0,s.KR)(!1),n=(0,s.KR)(!1);return(t,s)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,r.C4)(["mac-titlebar",{focused:e.isFocused}]),onDblclick:s[9]||(s[9]=e=>t.$emit("double-click"))},[e.showTrafficLights?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("div",{class:"traffic-light close",onClick:s[0]||(s[0]=e=>t.$emit("close")),onMouseenter:s[1]||(s[1]=e=>a.value=!0),onMouseleave:s[2]||(s[2]=e=>a.value=!1)},[a.value?((0,l.uX)(),(0,l.CE)("svg",u,s[10]||(s[10]=[(0,l.Lk)("path",{d:"M0 0L6 6M6 0L0 6",stroke:"rgba(0,0,0,0.7)","stroke-width":"1"},null,-1)]))):(0,l.Q3)("",!0)],32),(0,l.Lk)("div",{class:"traffic-light minimize",onClick:s[3]||(s[3]=e=>t.$emit("minimize")),onMouseenter:s[4]||(s[4]=e=>i.value=!0),onMouseleave:s[5]||(s[5]=e=>i.value=!1)},[i.value?((0,l.uX)(),(0,l.CE)("svg",d,s[11]||(s[11]=[(0,l.Lk)("rect",{width:"8",height:"1",fill:"rgba(0,0,0,0.7)"},null,-1)]))):(0,l.Q3)("",!0)],32),(0,l.Lk)("div",{class:"traffic-light maximize",onClick:s[6]||(s[6]=e=>t.$emit("maximize")),onMouseenter:s[7]||(s[7]=e=>n.value=!0),onMouseleave:s[8]||(s[8]=e=>n.value=!1)},[n.value?((0,l.uX)(),(0,l.CE)("svg",m,s[12]||(s[12]=[(0,l.Lk)("path",{d:"M0 0L6 0L6 6L0 6Z",stroke:"rgba(0,0,0,0.7)","stroke-width":"1",fill:"none"},null,-1)]))):(0,l.Q3)("",!0)],32)])):(0,l.Q3)("",!0),(0,l.Lk)("div",v,(0,r.v_)(e.title),1),(0,l.Lk)("div",p,[(0,l.RG)(t.$slots,"controls")])],34))}},f=a(1241);const g=(0,f.A)(k,[["__scopeId","data-v-6e79a7ba"]]);var y=g,h=a(9623),b=(a(5331),a(9092),a(813));a(4896);const C={class:"mac-toolbar"},L={class:"toolbar-content"},_={class:"toolbar-section left"},w=["onClick"],E={key:0,class:"separator-line"},X={key:1,class:"toolbar-label"},F={class:"toolbar-section center"},I={class:"search-container"},W={class:"toolbar-section right"},R=["onClick"],x={key:0,class:"separator-line"},M={key:1,class:"toolbar-label"};var D={__name:"MacToolbar",props:{items:{type:Array,default:()=>[]},showSearch:{type:Boolean,default:!0},searchPlaceholder:{type:String,default:"搜索"}},emits:["item-click","search","search-clear"],setup(e,{emit:t}){const a=e,i=t,n=(0,s.KR)(""),c=(0,l.EW)(()=>a.items.filter(e=>"left"===e.position||!e.position)),u=(0,l.EW)(()=>a.items.filter(e=>"right"===e.position)),d=e=>{e.disabled||"separator"===e.type||i("item-click",e)},m=e=>{i("search",e)},v=()=>{n.value="",i("search-clear")};return(e,t)=>{const a=b.tk,i=h.WK;return(0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("div",L,[(0,l.Lk)("div",_,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(c.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:(0,r.C4)(["toolbar-item",{active:e.active,disabled:e.disabled,separator:"separator"===e.type}]),onClick:t=>d(e)},["separator"===e.type?((0,l.uX)(),(0,l.CE)("div",E)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.icon?((0,l.uX)(),(0,l.Wv)(a,{key:0,class:"toolbar-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.icon)))]),_:2},1024)):(0,l.Q3)("",!0),e.label?((0,l.uX)(),(0,l.CE)("span",X,(0,r.v_)(e.label),1)):(0,l.Q3)("",!0)],64))],10,w))),128))]),(0,l.Lk)("div",F,[(0,l.Lk)("div",I,[(0,l.bF)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:"搜索",size:"small",clearable:"",onInput:m,onClear:v},{prefix:(0,l.k6)(()=>[(0,l.bF)(a,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Search))]),_:1})]),_:1},8,["modelValue"])])]),(0,l.Lk)("div",W,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:(0,r.C4)(["toolbar-item",{active:e.active,disabled:e.disabled,separator:"separator"===e.type}]),onClick:t=>d(e)},["separator"===e.type?((0,l.uX)(),(0,l.CE)("div",x)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.icon?((0,l.uX)(),(0,l.Wv)(a,{key:0,class:"toolbar-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.icon)))]),_:2},1024)):(0,l.Q3)("",!0),e.label?((0,l.uX)(),(0,l.CE)("span",M,(0,r.v_)(e.label),1)):(0,l.Q3)("",!0)],64))],10,R))),128))])])])}}};const z=(0,f.A)(D,[["__scopeId","data-v-e38d61cc"]]);var $=z;const A={class:"mac-statusbar"},S={class:"statusbar-content"},Q={class:"status-left"},K={key:0,class:"item-count"},T={key:1,class:"selected-count"},B={key:2,class:"total-size"},P={class:"status-center"},O={key:0,class:"loading-indicator"},N={key:1,class:"status-message"},V={class:"status-right"},G={key:0,class:"view-mode"},U={key:1,class:"sort-info"},q={key:2,class:"zoom-level"};var j={__name:"MacStatusBar",props:{itemCount:{type:Number,default:0},selectedCount:{type:Number,default:0},totalSize:{type:Number,default:0},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"加载中..."},status:{type:String,default:""},viewMode:{type:String,default:""},sortInfo:{type:Object,default:null},zoomLevel:{type:Number,default:null}},setup(e){const t=e,a=(0,l.EW)(()=>{const e={grid:"图标视图",list:"列表视图",column:"分栏视图",gallery:"画廊视图"};return e[t.viewMode]||""}),i=e=>{if(!e||0===e)return"";const t=["B","KB","MB","GB","TB"];let a=e,l=0;while(a>=1024&&l<t.length-1)a/=1024,l++;return`${a.toFixed(0===l?0:1)} ${t[l]}`};return(t,n)=>{const c=b.tk;return(0,l.uX)(),(0,l.CE)("div",A,[(0,l.Lk)("div",S,[(0,l.Lk)("div",Q,[e.itemCount>0?((0,l.uX)(),(0,l.CE)("span",K,(0,r.v_)(e.itemCount)+" 个项目 ",1)):(0,l.Q3)("",!0),e.selectedCount>0?((0,l.uX)(),(0,l.CE)("span",T," 已选择 "+(0,r.v_)(e.selectedCount)+" 个 ",1)):(0,l.Q3)("",!0),e.totalSize?((0,l.uX)(),(0,l.CE)("span",B,(0,r.v_)(i(e.totalSize)),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",P,[e.loading?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.bF)(c,{class:"loading-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Loading))]),_:1}),(0,l.Lk)("span",null,(0,r.v_)(e.loadingText),1)])):e.status?((0,l.uX)(),(0,l.CE)("div",N,(0,r.v_)(e.status),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",V,[e.viewMode?((0,l.uX)(),(0,l.CE)("div",G,[(0,l.bF)(c,null,{default:(0,l.k6)(()=>["grid"===e.viewMode?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Grid),{key:0})):"list"===e.viewMode?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.List),{key:1})):"column"===e.viewMode?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Document),{key:2})):"gallery"===e.viewMode?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Picture),{key:3})):(0,l.Q3)("",!0)]),_:1}),(0,l.Lk)("span",null,(0,r.v_)(a.value),1)])):(0,l.Q3)("",!0),e.sortInfo?((0,l.uX)(),(0,l.CE)("div",U,[(0,l.Lk)("span",null,"按"+(0,r.v_)(e.sortInfo.field)+"排序",1),(0,l.bF)(c,null,{default:(0,l.k6)(()=>["asc"===e.sortInfo.order?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.ArrowUp),{key:0})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.ArrowDown),{key:1}))]),_:1})])):(0,l.Q3)("",!0),e.zoomLevel?((0,l.uX)(),(0,l.CE)("div",q,(0,r.v_)(Math.round(100*e.zoomLevel))+"% ",1)):(0,l.Q3)("",!0)])])])}}};const H=(0,f.A)(j,[["__scopeId","data-v-d7d2788e"]]);var Y=H;const J={class:"mac-window-content"};var Z={__name:"MacWindow",props:{title:{type:String,default:"Untitled"},width:{type:Number,default:800},height:{type:Number,default:600},minWidth:{type:Number,default:400},minHeight:{type:Number,default:300},resizable:{type:Boolean,default:!0},showTrafficLights:{type:Boolean,default:!0},showToolbar:{type:Boolean,default:!0},showStatusBar:{type:Boolean,default:!0},toolbarItems:{type:Array,default:()=>[]},statusBarContent:{type:String,default:""}},emits:["close","minimize","maximize","resize","toolbar-click","focus","blur"],setup(e,{emit:t}){const a=e,n=t,o=(0,i.Pj)(),c=(0,s.KR)(!0),u=(0,s.KR)(!1),d=(0,s.KR)(a.width),m=(0,s.KR)(a.height),v=(0,s.KR)(!1),p=(0,s.KR)(0),k=(0,s.KR)(0),f=(0,s.KR)(0),g=(0,s.KR)(0),h=(0,l.EW)(()=>o.getters.useDarkMode),b=(0,l.EW)(()=>({width:`${d.value}px`,height:`${m.value}px`,minWidth:`${a.minWidth}px`,minHeight:`${a.minHeight}px`})),C=()=>{c.value||(c.value=!0,n("focus"))},L=()=>{c.value=!1,n("blur")},_=()=>{n("close")},w=()=>{n("minimize")},E=()=>{u.value=!u.value,n("maximize",u.value)},X=()=>{E()},F=e=>{n("toolbar-click",e)},I=e=>{a.resizable&&(v.value=!0,p.value=e.clientX,k.value=e.clientY,f.value=d.value,g.value=m.value,document.addEventListener("mousemove",W),document.addEventListener("mouseup",R),e.preventDefault())},W=e=>{if(!v.value)return;const t=e.clientX-p.value,l=e.clientY-k.value,s=Math.max(a.minWidth,f.value+t),i=Math.max(a.minHeight,g.value+l);d.value=s,m.value=i,n("resize",{width:s,height:i})},R=()=>{v.value=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",R)},x=e=>{c.value&&(e.metaKey&&"w"===e.key&&(e.preventDefault(),_()),e.metaKey&&"m"===e.key&&(e.preventDefault(),w()))};return(0,l.sV)(()=>{document.addEventListener("keydown",x),document.addEventListener("click",e=>{e.target.closest(".mac-window")||L()})}),(0,l.hi)(()=>{document.removeEventListener("keydown",x),document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",R)}),(t,a)=>((0,l.uX)(),(0,l.CE)("div",{class:(0,r.C4)(["mac-window",{focused:c.value,fullscreen:u.value,"dark-theme":h.value}]),style:(0,r.Tr)(b.value),onMousedown:C},[(0,l.bF)(y,{title:e.title,"show-traffic-lights":e.showTrafficLights,"is-focused":c.value,onClose:_,onMinimize:w,onMaximize:E,onDoubleClick:X},null,8,["title","show-traffic-lights","is-focused"]),e.showToolbar?((0,l.uX)(),(0,l.Wv)($,{key:0,items:e.toolbarItems,onItemClick:F},null,8,["items"])):(0,l.Q3)("",!0),(0,l.Lk)("div",J,[(0,l.RG)(t.$slots,"default")]),e.showStatusBar?((0,l.uX)(),(0,l.Wv)(Y,{key:1,status:e.statusBarContent},null,8,["status"])):(0,l.Q3)("",!0),e.resizable&&!u.value?((0,l.uX)(),(0,l.CE)("div",{key:2,class:"resize-handle",onMousedown:I},null,32)):(0,l.Q3)("",!0)],38))}};const ee=(0,f.A)(Z,[["__scopeId","data-v-11e5c314"]]);var te=ee;const ae={class:"finder-sidebar"},le={class:"sidebar-section"},se={class:"section-header"},ie={class:"section-content"},ne=["onClick"],oe={class:"item-label"},re={class:"sidebar-section"},ce={class:"section-header"},ue={class:"section-content"},de={class:"sidebar-section"},me={class:"section-header"},ve={class:"section-content"},pe=["onClick"],ke={class:"item-label"},fe={class:"tag-count"},ge={key:0,class:"sidebar-section"},ye={class:"section-header"},he={class:"section-content"},be=["onClick"],Ce={class:"item-label"},Le={class:"item-time"};var _e={__name:"FinderSidebar",props:{currentPath:{type:String,required:!0},favorites:{type:Array,default:()=>[]},recentItems:{type:Array,default:()=>[]}},emits:["navigate","toggle-favorite"],setup(e,{emit:t}){const a=(0,l.EW)(()=>[{name:"重要",color:"#ff3b30",count:12},{name:"工作",color:"#007aff",count:8},{name:"个人",color:"#34c759",count:15},{name:"项目",color:"#ff9500",count:6}]),i=e=>{if(!e)return"";const t=new Date,a=new Date(e),l=t-a;return l<6e4?"刚刚":l<36e5?`${Math.floor(l/6e4)}分钟前`:l<864e5?`${Math.floor(l/36e5)}小时前`:a.toLocaleDateString()},n=e=>{console.log("Tag clicked:",e)};return(t,c)=>{const u=b.tk;return(0,l.uX)(),(0,l.CE)("div",ae,[(0,l.Lk)("div",le,[(0,l.Lk)("div",se,[(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Star))]),_:1}),c[3]||(c[3]=(0,l.Lk)("span",null,"收藏夹",-1))]),(0,l.Lk)("div",ie,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.favorites,a=>((0,l.uX)(),(0,l.CE)("div",{key:a.path,class:(0,r.C4)(["sidebar-item",{active:a.path===e.currentPath}]),onClick:e=>t.$emit("navigate",a.path)},[(0,l.bF)(u,{class:"item-icon"},{default:(0,l.k6)(()=>["folder"===a.type?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Folder),{key:0})):"image"===a.type?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Picture),{key:1})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Document),{key:2}))]),_:2},1024),(0,l.Lk)("span",oe,(0,r.v_)(a.name),1)],10,ne))),128))])]),(0,l.Lk)("div",re,[(0,l.Lk)("div",ce,[(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Monitor))]),_:1}),c[4]||(c[4]=(0,l.Lk)("span",null,"位置",-1))]),(0,l.Lk)("div",ue,[(0,l.Lk)("div",{class:(0,r.C4)(["sidebar-item",{active:"/"===e.currentPath}]),onClick:c[0]||(c[0]=e=>t.$emit("navigate","/"))},[(0,l.bF)(u,{class:"item-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Folder))]),_:1}),c[5]||(c[5]=(0,l.Lk)("span",{class:"item-label"},"图床根目录",-1))],2),(0,l.Lk)("div",{class:(0,r.C4)(["sidebar-item",{active:"/images"===e.currentPath}]),onClick:c[1]||(c[1]=e=>t.$emit("navigate","/images"))},[(0,l.bF)(u,{class:"item-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Picture))]),_:1}),c[6]||(c[6]=(0,l.Lk)("span",{class:"item-label"},"我的图片",-1))],2),(0,l.Lk)("div",{class:(0,r.C4)(["sidebar-item",{active:"/recent"===e.currentPath}]),onClick:c[2]||(c[2]=e=>t.$emit("navigate","/recent"))},[(0,l.bF)(u,{class:"item-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Clock))]),_:1}),c[7]||(c[7]=(0,l.Lk)("span",{class:"item-label"},"最近上传",-1))],2)])]),(0,l.Lk)("div",de,[(0,l.Lk)("div",me,[(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.PriceTag))]),_:1}),c[8]||(c[8]=(0,l.Lk)("span",null,"标签",-1))]),(0,l.Lk)("div",ve,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.name,class:"sidebar-item tag-item",style:(0,r.Tr)({"--tag-color":e.color}),onClick:t=>n(e)},[c[9]||(c[9]=(0,l.Lk)("div",{class:"tag-dot"},null,-1)),(0,l.Lk)("span",ke,(0,r.v_)(e.name),1),(0,l.Lk)("span",fe,(0,r.v_)(e.count),1)],12,pe))),128))])]),e.recentItems.length>0?((0,l.uX)(),(0,l.CE)("div",ge,[(0,l.Lk)("div",ye,[(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Clock))]),_:1}),c[10]||(c[10]=(0,l.Lk)("span",null,"最近访问",-1))]),(0,l.Lk)("div",he,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.recentItems.slice(0,5),e=>((0,l.uX)(),(0,l.CE)("div",{key:e.path,class:"sidebar-item recent-item",onClick:a=>t.$emit("navigate",e.path)},[(0,l.bF)(u,{class:"item-icon"},{default:(0,l.k6)(()=>["folder"===e.type?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Folder),{key:0})):"image"===e.type?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Picture),{key:1})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Document),{key:2}))]),_:2},1024),(0,l.Lk)("span",Ce,(0,r.v_)(e.name),1),(0,l.Lk)("span",Le,(0,r.v_)(i(e.lastAccessed)),1)],8,be))),128))])])):(0,l.Q3)("",!0)])}}};const we=(0,f.A)(_e,[["__scopeId","data-v-a58c9382"]]);var Ee=we,Xe=a(5130);a(3579);const Fe=["onClick","onDblclick","onContextmenu"],Ie={class:"icon-container"},We={key:0,class:"folder-icon"},Re={key:1,class:"image-thumbnail"},xe=["src","alt"],Me={class:"image-overlay"},De={key:2,class:"file-icon"},ze={key:3,class:"selection-indicator"},$e={class:"item-name"},Ae=["title"],Se={key:0,class:"item-info"},Qe={key:0,class:"dimensions"},Ke={key:1,class:"file-size"};var Te={__name:"FinderIconView",props:{items:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},zoomLevel:{type:Number,default:1}},emits:["item-select","item-double-click","item-context-menu"],setup(e,{emit:t}){const a=e,i=t,n=e=>a.selectedItems.some(t=>t.path===e.path),c=(e,t)=>{let l=[];if(t.ctrlKey||t.metaKey)l=n(e)?a.selectedItems.filter(t=>t.path!==e.path):[...a.selectedItems,e];else if(t.shiftKey&&a.selectedItems.length>0){const t=a.selectedItems[a.selectedItems.length-1],s=a.items.findIndex(e=>e.path===t.path),i=a.items.findIndex(t=>t.path===e.path);if(-1!==s&&-1!==i){const e=Math.min(s,i),t=Math.max(s,i);l=a.items.slice(e,t+1)}else l=[e]}else l=[e];i("item-select",l)},u=e=>{i("item-double-click",e)},d=(e,t)=>{n(e)||i("item-select",[e]),i("item-context-menu",t,e)},m=e=>{e.target.style.display="none"},v=e=>{e.target.style.opacity="1"},p=e=>{if(!e)return"";const t=["B","KB","MB","GB"];let a=e,l=0;while(a>=1024&&l<t.length-1)a/=1024,l++;return`${a.toFixed(0===l?0:1)} ${t[l]}`};return(t,a)=>{const i=b.tk;return(0,l.uX)(),(0,l.CE)("div",{class:"finder-icon-view",style:(0,r.Tr)({"--zoom-level":e.zoomLevel})},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.path,class:(0,r.C4)(["icon-item",{selected:n(e),image:"image"===e.type,folder:"folder"===e.type}]),onClick:t=>c(e,t),onDblclick:t=>u(e),onContextmenu:(0,Xe.D$)(t=>d(e,t),["prevent"])},[(0,l.Lk)("div",Ie,["folder"===e.type?((0,l.uX)(),(0,l.CE)("div",We,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Folder))]),_:1})])):"image"===e.type?((0,l.uX)(),(0,l.CE)("div",Re,[(0,l.Lk)("img",{src:e.thumbnail||e.url,alt:e.name,onError:m,onLoad:v},null,40,xe),(0,l.Lk)("div",Me,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Picture))]),_:1})])])):((0,l.uX)(),(0,l.CE)("div",De,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Document))]),_:1})])),n(e)?((0,l.uX)(),(0,l.CE)("div",ze,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Check))]),_:1})])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",$e,[(0,l.Lk)("span",{title:e.name},(0,r.v_)(e.name),9,Ae)]),"image"===e.type?((0,l.uX)(),(0,l.CE)("div",Se,[e.width&&e.height?((0,l.uX)(),(0,l.CE)("span",Qe,(0,r.v_)(e.width)+"×"+(0,r.v_)(e.height),1)):(0,l.Q3)("",!0),e.size?((0,l.uX)(),(0,l.CE)("span",Ke,(0,r.v_)(p(e.size)),1)):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)],42,Fe))),128))],4)}}};const Be=(0,f.A)(Te,[["__scopeId","data-v-1a477078"]]);var Pe=Be;const Oe={class:"finder-list-view"},Ne={class:"list-header"},Ve={class:"list-content"},Ge=["onClick","onDblclick","onContextmenu"],Ue={class:"item-column name-column"},qe={class:"item-name"},je={class:"item-column size-column"},He={class:"item-column type-column"},Ye={class:"item-column date-column"};var Je={__name:"FinderListView",props:{items:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},sortField:{type:String,default:"name"},sortOrder:{type:String,default:"asc"}},emits:["item-select","item-double-click","item-context-menu","sort-change"],setup(e,{emit:t}){const a=e,i=t,n=e=>a.selectedItems.some(t=>t.path===e.path),c=(e,t)=>{let l=[];if(t.ctrlKey||t.metaKey)l=n(e)?a.selectedItems.filter(t=>t.path!==e.path):[...a.selectedItems,e];else if(t.shiftKey&&a.selectedItems.length>0){const t=a.selectedItems[a.selectedItems.length-1],s=a.items.findIndex(e=>e.path===t.path),i=a.items.findIndex(t=>t.path===e.path);if(-1!==s&&-1!==i){const e=Math.min(s,i),t=Math.max(s,i);l=a.items.slice(e,t+1)}else l=[e]}else l=[e];i("item-select",l)},u=e=>{i("item-double-click",e)},d=(e,t)=>{n(e)||i("item-select",[e]),i("item-context-menu",t,e)},m=e=>{const t=a.sortField===e&&"asc"===a.sortOrder?"desc":"asc";i("sort-change",{field:e,order:t})},v=e=>{if(!e||0===e)return"-";const t=["B","KB","MB","GB"];let a=e,l=0;while(a>=1024&&l<t.length-1)a/=1024,l++;return`${a.toFixed(0===l?0:1)} ${t[l]}`},p=e=>{if(!e)return"-";const t=new Date(e);return t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},k=e=>"folder"===e.type?"文件夹":"image"===e.type?"图片":"文件";return(t,a)=>{const i=b.tk;return(0,l.uX)(),(0,l.CE)("div",Oe,[(0,l.Lk)("div",Ne,[(0,l.Lk)("div",{class:"header-column name-column",onClick:a[0]||(a[0]=e=>m("name"))},[a[4]||(a[4]=(0,l.Lk)("span",null,"名称",-1)),"name"===e.sortField?((0,l.uX)(),(0,l.Wv)(i,{key:0,class:"sort-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)("asc"===e.sortOrder?(0,s.R1)(o.ArrowUp):(0,s.R1)(o.ArrowDown))))]),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("div",{class:"header-column size-column",onClick:a[1]||(a[1]=e=>m("size"))},[a[5]||(a[5]=(0,l.Lk)("span",null,"大小",-1)),"size"===e.sortField?((0,l.uX)(),(0,l.Wv)(i,{key:0,class:"sort-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)("asc"===e.sortOrder?(0,s.R1)(o.ArrowUp):(0,s.R1)(o.ArrowDown))))]),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("div",{class:"header-column type-column",onClick:a[2]||(a[2]=e=>m("type"))},[a[6]||(a[6]=(0,l.Lk)("span",null,"类型",-1)),"type"===e.sortField?((0,l.uX)(),(0,l.Wv)(i,{key:0,class:"sort-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)("asc"===e.sortOrder?(0,s.R1)(o.ArrowUp):(0,s.R1)(o.ArrowDown))))]),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("div",{class:"header-column date-column",onClick:a[3]||(a[3]=e=>m("modified"))},[a[7]||(a[7]=(0,l.Lk)("span",null,"修改时间",-1)),"modified"===e.sortField?((0,l.uX)(),(0,l.Wv)(i,{key:0,class:"sort-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)("asc"===e.sortOrder?(0,s.R1)(o.ArrowUp):(0,s.R1)(o.ArrowDown))))]),_:1})):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Ve,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.path,class:(0,r.C4)(["list-item",{selected:n(e)}]),onClick:t=>c(e,t),onDblclick:t=>u(e),onContextmenu:(0,Xe.D$)(t=>d(e,t),["prevent"])},[(0,l.Lk)("div",Ue,[(0,l.bF)(i,{class:"item-icon"},{default:(0,l.k6)(()=>["folder"===e.type?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Folder),{key:0})):"image"===e.type?((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Picture),{key:1})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(o.Document),{key:2}))]),_:2},1024),(0,l.Lk)("span",qe,(0,r.v_)(e.name),1)]),(0,l.Lk)("div",je,(0,r.v_)(v(e.size)),1),(0,l.Lk)("div",He,(0,r.v_)(k(e)),1),(0,l.Lk)("div",Ye,(0,r.v_)(p(e.modified)),1)],42,Ge))),128))])])}}};const Ze=(0,f.A)(Je,[["__scopeId","data-v-3d9ebbe7"]]);var et=Ze;const tt={class:"finder-column-view"},at={class:"column-placeholder"};var lt={__name:"FinderColumnView",props:{items:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},currentPath:{type:String,default:"/"}},emits:["item-select","item-double-click","item-context-menu","navigate"],setup(e,{emit:t}){return(t,a)=>{const i=b.tk;return(0,l.uX)(),(0,l.CE)("div",tt,[(0,l.Lk)("div",at,[(0,l.bF)(i,{class:"placeholder-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Document))]),_:1}),a[0]||(a[0]=(0,l.Lk)("h3",null,"分栏视图",-1)),a[1]||(a[1]=(0,l.Lk)("p",null,"分栏视图功能正在开发中",-1)),(0,l.Lk)("p",null,"当前显示 "+(0,r.v_)(e.items.length)+" 个项目",1)])])}}};const st=(0,f.A)(lt,[["__scopeId","data-v-0403ac88"]]);var it=st;const nt={class:"finder-gallery-view"},ot={class:"gallery-placeholder"};var rt={__name:"FinderGalleryView",props:{items:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]}},emits:["item-select","item-double-click","item-context-menu"],setup(e,{emit:t}){return(t,a)=>{const i=b.tk;return(0,l.uX)(),(0,l.CE)("div",nt,[(0,l.Lk)("div",ot,[(0,l.bF)(i,{class:"placeholder-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Picture))]),_:1}),a[0]||(a[0]=(0,l.Lk)("h3",null,"画廊视图",-1)),a[1]||(a[1]=(0,l.Lk)("p",null,"画廊视图功能正在开发中",-1)),(0,l.Lk)("p",null,"当前显示 "+(0,r.v_)(e.items.length)+" 个项目",1)])])}}};const ct=(0,f.A)(rt,[["__scopeId","data-v-5bbaa478"]]);var ut=ct;const dt={class:"finder-content-view"},mt={key:0,class:"loading-container"},vt={key:1,class:"empty-container"},pt={key:3,class:"drag-overlay"},kt={class:"drag-content"};var ft={__name:"FinderContentView",props:{currentPath:{type:String,required:!0},viewMode:{type:String,default:"grid"},items:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},searchQuery:{type:String,default:""},sortField:{type:String,default:"name"},sortOrder:{type:String,default:"asc"},zoomLevel:{type:Number,default:1}},emits:["item-select","item-double-click","item-context-menu","drag-drop","sort-change","navigate"],setup(e,{emit:t}){const a=e,i=t,n=(0,s.KR)(!1),c=(0,l.EW)(()=>{let e=[...a.items];if(a.searchQuery){const t=a.searchQuery.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return e.sort((e,t)=>{let l,s;switch(a.sortField){case"name":l=e.name.toLowerCase(),s=t.name.toLowerCase();break;case"size":l=e.size||0,s=t.size||0;break;case"type":l=e.type,s=t.type;break;case"modified":l=new Date(e.modified||0),s=new Date(t.modified||0);break;default:return 0}return l<s?"asc"===a.sortOrder?-1:1:l>s?"asc"===a.sortOrder?1:-1:0}),e.sort((e,t)=>"folder"===e.type&&"folder"!==t.type?-1:"folder"!==e.type&&"folder"===t.type?1:0)}),u=e=>{i("item-select",e)},d=e=>{i("item-double-click",e)},m=(e,t)=>{i("item-context-menu",e,t)},v=e=>{i("sort-change",e)},p=e=>{i("navigate",e)},k=e=>{e.dataTransfer.types.includes("Files")&&(n.value=!0,e.dataTransfer.dropEffect="copy")},f=e=>{e.currentTarget.contains(e.relatedTarget)||(n.value=!1)},g=e=>{n.value=!1;const t=Array.from(e.dataTransfer.files),l=t.filter(e=>e.type.startsWith("image/"));l.length>0&&i("drag-drop",{files:l,targetPath:a.currentPath})};return(t,a)=>{const i=b.tk;return(0,l.uX)(),(0,l.CE)("div",dt,[e.loading?((0,l.uX)(),(0,l.CE)("div",mt,[(0,l.bF)(i,{class:"loading-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Loading))]),_:1}),a[0]||(a[0]=(0,l.Lk)("span",null,"加载中...",-1))])):0===c.value.length?((0,l.uX)(),(0,l.CE)("div",vt,[(0,l.bF)(i,{class:"empty-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.FolderOpened))]),_:1}),a[1]||(a[1]=(0,l.Lk)("h3",null,"此文件夹为空",-1)),a[2]||(a[2]=(0,l.Lk)("p",null,"拖拽图片到这里开始上传",-1))])):((0,l.uX)(),(0,l.CE)("div",{key:2,class:(0,r.C4)(["content-container",`view-${e.viewMode}`]),onDragover:(0,Xe.D$)(k,["prevent"]),onDragleave:f,onDrop:(0,Xe.D$)(g,["prevent"])},["grid"===e.viewMode?((0,l.uX)(),(0,l.Wv)(Pe,{key:0,items:c.value,"selected-items":e.selectedItems,"zoom-level":e.zoomLevel,onItemSelect:u,onItemDoubleClick:d,onItemContextMenu:m},null,8,["items","selected-items","zoom-level"])):"list"===e.viewMode?((0,l.uX)(),(0,l.Wv)(et,{key:1,items:c.value,"selected-items":e.selectedItems,"sort-field":e.sortField,"sort-order":e.sortOrder,onItemSelect:u,onItemDoubleClick:d,onItemContextMenu:m,onSortChange:v},null,8,["items","selected-items","sort-field","sort-order"])):"column"===e.viewMode?((0,l.uX)(),(0,l.Wv)(it,{key:2,items:c.value,"selected-items":e.selectedItems,"current-path":e.currentPath,onItemSelect:u,onItemDoubleClick:d,onItemContextMenu:m,onNavigate:p},null,8,["items","selected-items","current-path"])):"gallery"===e.viewMode?((0,l.uX)(),(0,l.Wv)(ut,{key:3,items:c.value,"selected-items":e.selectedItems,onItemSelect:u,onItemDoubleClick:d,onItemContextMenu:m},null,8,["items","selected-items"])):(0,l.Q3)("",!0)],34)),n.value?((0,l.uX)(),(0,l.CE)("div",pt,[(0,l.Lk)("div",kt,[(0,l.bF)(i,{class:"drag-icon"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Upload))]),_:1}),a[3]||(a[3]=(0,l.Lk)("h3",null,"拖放图片到这里上传",-1)),a[4]||(a[4]=(0,l.Lk)("p",null,"支持 JPG、PNG、GIF、WebP 格式",-1))])])):(0,l.Q3)("",!0)])}}};const gt=(0,f.A)(ft,[["__scopeId","data-v-5ed193f5"]]);var yt=gt;const ht=["onClick"],bt={key:0,class:"menu-divider"},Ct={class:"menu-label"},Lt={key:1,class:"menu-shortcut"};var _t={__name:"MacContextMenu",props:{visible:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0},items:{type:Array,default:()=>[]}},emits:["close","item-click"],setup(e,{emit:t}){const a=e,s=t,i=(0,l.EW)(()=>{const e=window.innerWidth,t=window.innerHeight,l=200,s=32*a.items.length+16;let i=a.x,n=a.y;return i+l>e&&(i=e-l-10),n+s>t&&(n=t-s-10),{left:`${i}px`,top:`${n}px`}}),n=e=>{e.disabled||"divider"===e.type||(s("item-click",e.action,e),s("close"))},o=e=>{"Escape"===e.key&&s("close")};return(0,l.sV)(()=>{document.addEventListener("keydown",o)}),(0,l.hi)(()=>{document.removeEventListener("keydown",o)}),(t,a)=>{const s=b.tk;return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[e.visible?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"mac-context-menu-overlay",onClick:a[1]||(a[1]=e=>t.$emit("close")),onContextmenu:a[2]||(a[2]=(0,Xe.D$)(e=>t.$emit("close"),["prevent"]))},[(0,l.Lk)("div",{class:"mac-context-menu",style:(0,r.Tr)(i.value),onClick:a[0]||(a[0]=(0,Xe.D$)(()=>{},["stop"]))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:(0,r.C4)(["menu-item",{disabled:e.disabled,divider:"divider"===e.type}]),onClick:t=>n(e)},["divider"===e.type?((0,l.uX)(),(0,l.CE)("div",bt)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.icon?((0,l.uX)(),(0,l.Wv)(s,{key:0,class:"menu-icon"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.icon)))]),_:2},1024)):(0,l.Q3)("",!0),(0,l.Lk)("span",Ct,(0,r.v_)(e.label),1),e.shortcut?((0,l.uX)(),(0,l.CE)("span",Lt,(0,r.v_)(e.shortcut),1)):(0,l.Q3)("",!0)],64))],10,ht))),128))],4)],32)):(0,l.Q3)("",!0)])}}};const wt=(0,f.A)(_t,[["__scopeId","data-v-6f37fa2e"]]);var Et=wt;const Xt={class:"image-container"},Ft=["src","alt"],It={class:"image-info"},Wt={class:"image-title"},Rt={class:"image-meta"},xt={key:0,class:"meta-item"},Mt={key:1,class:"meta-item"},Dt={key:2,class:"meta-item"},zt={class:"action-buttons"};var $t={__name:"ImagePreviewModal",props:{image:{type:Object,required:!0},images:{type:Array,default:()=>[]}},emits:["close","navigate"],setup(e,{emit:t}){const a=e,i=(0,l.EW)(()=>a.images.findIndex(e=>e.path===a.image.path)),c=(0,l.EW)(()=>i.value>0),u=(0,l.EW)(()=>i.value<a.images.length-1),d=e=>{if(!e)return"";const t=["B","KB","MB","GB"];let a=e,l=0;while(a>=1024&&l<t.length-1)a/=1024,l++;return`${a.toFixed(0===l?0:1)} ${t[l]}`},m=e=>{if(!e)return"";const t=new Date(e);return t.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},v=()=>{},p=()=>{n.nk.error("图片加载失败")},k=async()=>{try{await navigator.clipboard.writeText(a.image.url),n.nk.success("链接已复制到剪贴板")}catch(e){n.nk.error("复制失败")}},f=()=>{const e=document.createElement("a");e.href=a.image.url,e.download=a.image.name,e.click()},g=()=>{navigator.share?navigator.share({title:a.image.name,url:a.image.url}):k()};return(t,a)=>{const i=b.tk;return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.Lk)("div",{class:"image-preview-modal",onClick:a[4]||(a[4]=e=>t.$emit("close"))},[a[8]||(a[8]=(0,l.Lk)("div",{class:"modal-backdrop"},null,-1)),(0,l.Lk)("div",{class:"modal-content",onClick:a[3]||(a[3]=(0,Xe.D$)(()=>{},["stop"]))},[(0,l.Lk)("button",{class:"close-button",onClick:a[0]||(a[0]=e=>t.$emit("close"))},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Close))]),_:1})]),(0,l.Lk)("div",Xt,[(0,l.Lk)("img",{src:e.image.url,alt:e.image.name,class:"preview-image",onLoad:v,onError:p},null,40,Ft)]),(0,l.Lk)("div",It,[(0,l.Lk)("h3",Wt,(0,r.v_)(e.image.name),1),(0,l.Lk)("div",Rt,[e.image.size?((0,l.uX)(),(0,l.CE)("span",xt,(0,r.v_)(d(e.image.size)),1)):(0,l.Q3)("",!0),e.image.width&&e.image.height?((0,l.uX)(),(0,l.CE)("span",Mt,(0,r.v_)(e.image.width)+" × "+(0,r.v_)(e.image.height),1)):(0,l.Q3)("",!0),e.image.created?((0,l.uX)(),(0,l.CE)("span",Dt,(0,r.v_)(m(e.image.created)),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",zt,[(0,l.Lk)("button",{class:"action-button",onClick:k},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Link))]),_:1}),a[5]||(a[5]=(0,l.Lk)("span",null,"复制链接",-1))]),(0,l.Lk)("button",{class:"action-button",onClick:f},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Download))]),_:1}),a[6]||(a[6]=(0,l.Lk)("span",null,"下载",-1))]),(0,l.Lk)("button",{class:"action-button",onClick:g},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Share))]),_:1}),a[7]||(a[7]=(0,l.Lk)("span",null,"分享",-1))])]),c.value?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"nav-button prev",onClick:a[1]||(a[1]=e=>t.$emit("navigate","prev"))},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.ArrowLeft))]),_:1})])):(0,l.Q3)("",!0),u.value?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"nav-button next",onClick:a[2]||(a[2]=e=>t.$emit("navigate","next"))},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.ArrowRight))]),_:1})])):(0,l.Q3)("",!0)])])])}}};const At=(0,f.A)($t,[["__scopeId","data-v-03252064"]]);var St=At;const Qt={class:"upload-progress-modal"},Kt={class:"modal-content"},Tt={class:"modal-header"},Bt={class:"overall-progress"},Pt={class:"progress-info"},Ot={class:"progress-text"},Nt={class:"progress-percentage"},Vt={class:"progress-bar"},Gt={class:"file-list"},Ut={class:"file-icon"},qt={class:"file-info"},jt={class:"file-name"},Ht={class:"file-progress"},Yt={class:"progress-bar small"},Jt={class:"progress-text"},Zt={class:"file-status"},ea={key:0,class:"status-text"},ta={key:1,class:"status-text"},aa={key:2,class:"status-text success"},la={key:3,class:"status-text error"},sa={class:"modal-actions"};var ia={__name:"UploadProgressModal",props:{files:{type:Array,default:()=>[]},progress:{type:Number,default:0}},emits:["close","cancel"],setup(e,{emit:t}){const a=e,i=(0,l.EW)(()=>a.files.length),n=(0,l.EW)(()=>a.files.filter(e=>"completed"===e.status).length),c=(0,l.EW)(()=>{if(0===i.value)return 0;const e=a.files.reduce((e,t)=>e+t.progress,0);return e/i.value}),u=(0,l.EW)(()=>n.value===i.value);return(t,a)=>{const d=b.tk;return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.Lk)("div",Qt,[a[4]||(a[4]=(0,l.Lk)("div",{class:"modal-backdrop"},null,-1)),(0,l.Lk)("div",Kt,[(0,l.Lk)("div",Tt,[a[3]||(a[3]=(0,l.Lk)("h3",{class:"modal-title"},"上传进度",-1)),(0,l.Lk)("button",{class:"close-button",onClick:a[0]||(a[0]=e=>t.$emit("close"))},[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Close))]),_:1})])]),(0,l.Lk)("div",Bt,[(0,l.Lk)("div",Pt,[(0,l.Lk)("span",Ot," 正在上传 "+(0,r.v_)(n.value)+" / "+(0,r.v_)(i.value)+" 个文件 ",1),(0,l.Lk)("span",Nt,(0,r.v_)(Math.round(c.value))+"% ",1)]),(0,l.Lk)("div",Vt,[(0,l.Lk)("div",{class:"progress-fill",style:(0,r.Tr)({width:`${c.value}%`})},null,4)])]),(0,l.Lk)("div",Gt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.files,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:(0,r.C4)(["file-item",e.status])},[(0,l.Lk)("div",Ut,["uploading"===e.status?((0,l.uX)(),(0,l.Wv)(d,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Loading),{class:"spinning"})]),_:1})):"completed"===e.status?((0,l.uX)(),(0,l.Wv)(d,{key:1,class:"success"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Check))]),_:1})):"error"===e.status?((0,l.uX)(),(0,l.Wv)(d,{key:2,class:"error"},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Close))]),_:1})):((0,l.uX)(),(0,l.Wv)(d,{key:3},{default:(0,l.k6)(()=>[(0,l.bF)((0,s.R1)(o.Document))]),_:1}))]),(0,l.Lk)("div",qt,[(0,l.Lk)("div",jt,(0,r.v_)(e.name),1),(0,l.Lk)("div",Ht,[(0,l.Lk)("div",Yt,[(0,l.Lk)("div",{class:"progress-fill",style:(0,r.Tr)({width:`${e.progress}%`})},null,4)]),(0,l.Lk)("span",Jt,(0,r.v_)(e.progress)+"%",1)])]),(0,l.Lk)("div",Zt,["pending"===e.status?((0,l.uX)(),(0,l.CE)("span",ea,"等待中")):"uploading"===e.status?((0,l.uX)(),(0,l.CE)("span",ta,"上传中")):"completed"===e.status?((0,l.uX)(),(0,l.CE)("span",aa,"完成")):"error"===e.status?((0,l.uX)(),(0,l.CE)("span",la,"失败")):(0,l.Q3)("",!0)])],2))),128))]),(0,l.Lk)("div",sa,[u.value?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"done-button",onClick:a[2]||(a[2]=e=>t.$emit("close"))}," 完成 ")):((0,l.uX)(),(0,l.CE)("button",{key:0,class:"cancel-button",onClick:a[1]||(a[1]=e=>t.$emit("cancel"))}," 取消上传 "))])])])])}}};const na=(0,f.A)(ia,[["__scopeId","data-v-8736eeba"]]);var oa=na;const ra={class:"finder-layout"},ca={class:"finder-content"};var ua={__name:"FinderLayout",props:{initialPath:{type:String,default:"/"}},setup(e){const t=e,a=(0,i.Pj)(),r=(0,s.KR)(1e3),c=(0,s.KR)(700),u=(0,s.KR)(!0),d=(0,s.KR)(200),m=(0,s.KR)(!1),v=(0,s.KR)({visible:!1,x:0,y:0,items:[]}),p=(0,s.KR)({visible:!1,image:null,images:[]}),k=(0,s.KR)({visible:!1,files:[],progress:0}),f=(0,l.EW)(()=>{const e="/"===g.value?"图床":g.value.split("/").pop();return`${e} - 图床管理器`}),g=(0,l.EW)(()=>a.getters["finder/currentPath"]),y=(0,l.EW)(()=>a.getters["finder/viewMode"]),h=(0,l.EW)(()=>a.getters["finder/items"]),b=(0,l.EW)(()=>a.getters["finder/selectedItems"]),C=(0,l.EW)(()=>a.getters["finder/loading"]),L=(0,l.EW)(()=>a.getters["finder/searchQuery"]),_=(0,l.EW)(()=>a.getters["finder/sortField"]),w=(0,l.EW)(()=>a.getters["finder/sortOrder"]),E=(0,l.EW)(()=>a.getters["finder/favorites"]),X=(0,l.EW)(()=>a.getters["finder/recentItems"]),F=(0,l.EW)(()=>{const e=h.value.length,t=b.value.length,a=h.value.reduce((e,t)=>e+(t.size||0),0);return{itemCount:e,selectedCount:t,totalSize:a,loading:C.value,viewMode:y.value,sortInfo:{field:_.value,order:w.value}}}),I=(0,l.EW)(()=>[{id:"back",icon:o.ArrowLeft,position:"left",disabled:!a.getters["finder/canGoBack"],tooltip:"后退"},{id:"forward",icon:o.ArrowRight,position:"left",disabled:!a.getters["finder/canGoForward"],tooltip:"前进"},{id:"up",icon:o.ArrowUp,position:"left",disabled:"/"===g.value,tooltip:"向上"},{type:"separator",position:"left"},{id:"refresh",icon:o.Refresh,position:"left",tooltip:"刷新"},{id:"upload",icon:o.Upload,label:"上传",position:"right",tooltip:"上传图片"},{id:"new-folder",icon:o.FolderAdd,position:"right",tooltip:"新建文件夹"},{type:"separator",position:"right"},{id:"view-grid",icon:o.Grid,position:"right",active:"grid"===y.value,tooltip:"图标视图"},{id:"view-list",icon:o.List,position:"right",active:"list"===y.value,tooltip:"列表视图"},{id:"view-column",icon:o.Document,position:"right",active:"column"===y.value,tooltip:"分栏视图"},{id:"view-gallery",icon:o.Picture,position:"right",active:"gallery"===y.value,tooltip:"画廊视图"}]),W=()=>{window.close()},R=()=>{},x=e=>{},M=({width:e,height:t})=>{r.value=e,c.value=t},D=e=>{switch(e.id){case"back":a.dispatch("finder/navigateBack");break;case"forward":a.dispatch("finder/navigateForward");break;case"up":const e=g.value.split("/").slice(0,-1).join("/")||"/";z(e);break;case"refresh":a.dispatch("finder/refreshCurrentPath");break;case"upload":V();break;case"new-folder":U();break;case"view-grid":a.commit("finder/SET_VIEW_MODE","grid");break;case"view-list":a.commit("finder/SET_VIEW_MODE","list");break;case"view-column":a.commit("finder/SET_VIEW_MODE","column");break;case"view-gallery":a.commit("finder/SET_VIEW_MODE","gallery");break}},z=e=>{a.dispatch("finder/navigateTo",e)},$=e=>{a.commit("finder/SET_SELECTED_ITEMS",e)},A=e=>{"folder"===e.type?z(e.path):"image"===e.type?q(e):Z(e)},S=(e,t)=>{B(e,N(t))},Q=({files:e,targetPath:t})=>{e&&e.length>0&&G(e,t)},K=({field:e,order:t})=>{a.commit("finder/SET_SORT_FIELD",e),a.commit("finder/SET_SORT_ORDER",t)},T=e=>{a.dispatch("finder/toggleFavorite",e)},B=(e,t)=>{v.value={visible:!0,x:e.clientX,y:e.clientY,items:t}},P=()=>{v.value.visible=!1},O=(e,t)=>{P(),ee(e,t)},N=e=>{if(!e)return[{label:"上传图片",action:"upload",icon:o.Upload},{label:"新建文件夹",action:"new-folder",icon:o.FolderAdd},{type:"divider"},{label:"刷新",action:"refresh",icon:o.Refresh}];const t=[{label:"打开",action:"open"},{type:"divider"},{label:"复制链接",action:"copy-link",icon:o.Share},{label:"下载",action:"download"},{type:"divider"},{label:"重命名",action:"rename"},{label:"删除",action:"delete"}];return"image"===e.type&&t.splice(1,0,{label:"快速查看",action:"quick-look"}),t},V=()=>{const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/*",e.onchange=e=>{const t=Array.from(e.target.files);t.length>0&&G(t,g.value)},e.click()},G=(e,t)=>{k.value={visible:!0,files:e.map(e=>({name:e.name,progress:0,status:"pending"})),progress:0},a.dispatch("finder/uploadFiles",{files:e,path:t}).then(()=>{n.nk.success("上传完成"),H()}).catch(e=>{n.nk.error("上传失败: "+e.message),H()})},U=()=>{n.nk.info("新建文件夹功能开发中")},q=e=>{const t=h.value.filter(e=>"image"===e.type);p.value={visible:!0,image:e,images:t}},j=()=>{p.value.visible=!1},H=()=>{k.value.visible=!1},Y=e=>{},J=()=>{H()},Z=e=>{const t=document.createElement("a");t.href=e.url,t.download=e.name,t.click()},ee=(e,t)=>{switch(e){case"open":A(t);break;case"quick-look":q(t);break;case"copy-link":navigator.clipboard.writeText(t.url),n.nk.success("链接已复制");break;case"download":Z(t);break;case"upload":V();break;case"new-folder":U();break;case"refresh":a.dispatch("finder/refreshCurrentPath");break;default:n.nk.info(`${e} 功能开发中`)}},ae=e=>{m.value=!0,document.addEventListener("mousemove",le),document.addEventListener("mouseup",se),e.preventDefault()},le=e=>{if(m.value){const t=e.clientX;t>=150&&t<=400&&(d.value=t)}},se=()=>{m.value=!1,document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",se)};return(0,l.sV)(()=>{a.dispatch("finder/initialize",t.initialPath)}),(0,l.hi)(()=>{document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",se)}),(e,t)=>((0,l.uX)(),(0,l.Wv)(te,{title:f.value,width:r.value,height:c.value,"min-width":600,"min-height":400,"show-toolbar":!0,"show-status-bar":!0,"toolbar-items":I.value,"status-bar-content":F.value,onClose:W,onMinimize:R,onMaximize:x,onToolbarClick:D,onResize:M},{default:(0,l.k6)(()=>[(0,l.Lk)("div",ra,[u.value?((0,l.uX)(),(0,l.Wv)(Ee,{key:0,"current-path":g.value,favorites:E.value,"recent-items":X.value,onNavigate:z,onToggleFavorite:T},null,8,["current-path","favorites","recent-items"])):(0,l.Q3)("",!0),u.value?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"sidebar-splitter",onMousedown:ae},null,32)):(0,l.Q3)("",!0),(0,l.Lk)("div",ca,[(0,l.bF)(yt,{"current-path":g.value,"view-mode":y.value,items:h.value,"selected-items":b.value,loading:C.value,"search-query":L.value,"sort-field":_.value,"sort-order":w.value,onItemSelect:$,onItemDoubleClick:A,onItemContextMenu:S,onDragDrop:Q,onSortChange:K},null,8,["current-path","view-mode","items","selected-items","loading","search-query","sort-field","sort-order"])])]),v.value.visible?((0,l.uX)(),(0,l.Wv)(Et,{key:0,x:v.value.x,y:v.value.y,items:v.value.items,onItemClick:O,onClose:P},null,8,["x","y","items"])):(0,l.Q3)("",!0),p.value.visible?((0,l.uX)(),(0,l.Wv)(St,{key:1,image:p.value.image,images:p.value.images,onClose:j,onNavigate:Y},null,8,["image","images"])):(0,l.Q3)("",!0),k.value.visible?((0,l.uX)(),(0,l.Wv)(oa,{key:2,files:k.value.files,progress:k.value.progress,onClose:H,onCancel:J},null,8,["files","progress"])):(0,l.Q3)("",!0)]),_:1},8,["title","width","height","toolbar-items","status-bar-content"]))}};const da=(0,f.A)(ua,[["__scopeId","data-v-066aca8e"]]);var ma=da},9092:function(e,t,a){a(5331)}}]);
//# sourceMappingURL=57.a3f51696.js.map